



Network Working Group                                         A. Ghedini
Internet-Draft                                          Cloudflare, Inc.
Expires: May 31, 2017                                  November 27, 2016


         Transport Layer Security (TLS) Certificate Compression
            draft-ghedini-tls-certificate-compression-latest

Abstract

   In Transport Layer Security (TLS) handshakes, certificate chains
   often take up the majority of the bytes transmitted.

   This document describes how certificate chains can be compressed to
   reduce the amount of data transmitted and avoid some round trips.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 31, 2017.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




Ghedini                   Expires May 31, 2017                  [Page 1]

Internet-DraftTransport Layer Security (TLS) Certificate CoNovember 2016


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Notational Conventions  . . . . . . . . . . . . . . . . .   2
   2.  Certificate Compression Extension . . . . . . . . . . . . . .   2
   3.  Server Certificate Message  . . . . . . . . . . . . . . . . .   3
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   3
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   3
     5.1.  New Entry to the TLS ExtensionType Registry . . . . . . .   3
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   3
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   3
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   4
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   4

1.  Introduction

   In order to reduce latency and improve performance it can be useful
   to reduce the amount of data exchanged during a Transport Layer
   Security (TLS) handshake.

   [RFC7924] describes a mechanism that allows a client and a server to
   avoid transmitting certificates already shared in an earlier
   handshake, but it doesn't help when the client connects to a server
   for the first time and doesn't already have knowledge of the server's
   certificate chain.

   This document describes a mechanism that would allow certificates to
   be compressed during full handshakes.

1.1.  Notational Conventions

   The words "MUST", "MUST NOT", "SHOULD", and "MAY" are used in this
   document.  It's not shouting; when they are capitalized, they have
   the special meaning defined in [RFC2119].

2.  Certificate Compression Extension

   _TODO: Should this use RFC7250 instead?_

   This document defines a new extension type
   (compress_certificates(TBD)), which is used in ClientHello and
   ServerHello messages.  The extension type is specified as follows.

       enum {
            compress_certificates(TBD), (65535)
       } ExtensionType;





Ghedini                   Expires May 31, 2017                  [Page 2]

Internet-DraftTransport Layer Security (TLS) Certificate CoNovember 2016


   This allows TLS clients and servers to negotiate that the server
   sends its certificate chain in compressed form.

   In order to negotiate the use of compressed certificates, clients MAY
   include an extension of type "compress_certificates" in the extended
   client hello.  The "extension_data" field of this extension SHALL be
   empty.

   Servers that receive an extended hello containing a
   "compress_certificates" extension MAY agree to use compressed
   certificates by including an extension of type
   "compress_certificates", with empty "extension_data", in the extended
   server hello.

3.  Server Certificate Message

   When a ClientHello message contains the "compress_certificates" and
   the server agrees to use compressed certificates by sending the same
   extension back, then the server MUST send the certificate message
   shown in Figure 2.

       struct {
            TBD
       } Certificate;

   _TODO: Define CertificateEntry for TLS 1.3?_

4.  Security Considerations

   TBD

5.  IANA Considerations

5.1.  New Entry to the TLS ExtensionType Registry

   Create an entry, compress_certificates(TBD), in the existing registry
   for ExtensionType (defined in [RFC5246]).

6.  References

6.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.





Ghedini                   Expires May 31, 2017                  [Page 3]

Internet-DraftTransport Layer Security (TLS) Certificate CoNovember 2016


   [RFC4366]  Blake-Wilson, S., Nystrom, M., Hopwood, D., Mikkelsen, J.,
              and T. Wright, "Transport Layer Security (TLS)
              Extensions", RFC 4366, DOI 10.17487/RFC4366, April 2006,
              <http://www.rfc-editor.org/info/rfc4366>.

   [RFC5226]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 5226,
              DOI 10.17487/RFC5226, May 2008,
              <http://www.rfc-editor.org/info/rfc5226>.

   [RFC5246]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", RFC 5246,
              DOI 10.17487/RFC5246, August 2008,
              <http://www.rfc-editor.org/info/rfc5246>.

6.2.  Informative References

   [RFC7924]  Santesson, S. and H. Tschofenig, "Transport Layer Security
              (TLS) Cached Information Extension", RFC 7924,
              DOI 10.17487/RFC7924, July 2016,
              <http://www.rfc-editor.org/info/rfc7924>.

Author's Address

   Alessandro Ghedini
   Cloudflare, Inc.

   Email: alessandro@cloudflare.com























Ghedini                   Expires May 31, 2017                  [Page 4]
